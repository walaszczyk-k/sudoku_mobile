import{R as e,r,L as S,G as I}from"./index-Dn8PElVK.js";import{H}from"./Header-DVt79vtu.js";const W=({time:t})=>{const a=s=>String(s).padStart(2,"0"),o=a(Math.floor(t/36e5%60)),l=a(Math.floor(t/6e4%60)),u=a(Math.floor(t/1e3%60));return e.createElement("p",{className:"timer__time"},e.createElement("span",null,o),e.createElement("span",null,":"),e.createElement("span",null,l),e.createElement("span",null,":"),e.createElement("span",{className:"seconds"},u))},A=({running:t,setRunning:a,setIsChecked:o,newGameActions:l,checkGame:u,possibleCheckNum:s})=>{const c=()=>{a(!0),o(!1)};return e.createElement("div",{className:"timer__buttons"},e.createElement("button",{className:"timer__buttons__button reset_link",onClick:t?()=>a(!1):c},t?"Stop":"Resume"),e.createElement("button",{className:"timer__buttons__button reset_link",onClick:l},"New Game"),e.createElement("button",{className:`timer__buttons__button reset_link ${s?"":"button_disabled"}`,onClick:u,disabled:!s},"Check (",s,")"))},L=({time:t,running:a,setRunning:o,setIsChecked:l,newGameActions:u,checkGame:s,possibleCheckNum:c})=>e.createElement("div",{className:"timer"},e.createElement(W,{time:t}),e.createElement(A,{running:a,setRunning:o,setIsChecked:l,newGameActions:u,checkGame:s,possibleCheckNum:c})),P=e.memo(L),J=({sudokuData:t,running:a,sudokuChecker:o,isChecked:l,handleChange:u})=>{const s=(c,_)=>{const f=c===".",d=f?"":c;if(!f)return e.createElement("div",{key:_,className:"sudoku__box__cell"},c);const k=!a&&l&&!o[_]?"red":"transparent";return e.createElement("input",{key:_,className:"sudoku__box__cell",type:"text",maxLength:1,value:d,disabled:!a,style:{background:k,fontWeight:900,textAlign:"center",color:"black"},onChange:i=>{const b=i.target.value;/^[1-9]?$/.test(b)&&u(_,b||".")}})};return e.createElement(e.Fragment,null,t.map(s))},O=t=>{const a=String(Math.floor(t/36e5%60)).padStart(2,"0"),o=String(Math.floor(t/6e4%60)).padStart(2,"0"),l=String(Math.floor(t/1e3%60)).padStart(2,"0");return`${a}:${o}:${l}`},Y=({username:t,time:a,moveNumber:o,difficulty:l,possibleCheckNumber:u,newGameActions:s})=>{const c=r.useMemo(()=>O(a),[a]);return e.createElement("div",{className:"modal",style:{backgroundColor:"rgba(161, 241, 42, 0.927)"}},e.createElement("h2",{className:"modal__header"},"Gratulation ",t,"!"),e.createElement("div",{className:"modal__box"},e.createElement("div",{className:"modal__box__info"},e.createElement("p",{className:"modal__box__info__p"},"You win!!!"),e.createElement("p",{className:"modal__box__info__p"},"Your time: ",c),e.createElement("p",{className:"modal__box__info__p"},"Move number: ",o)),e.createElement("div",{className:"modal__box__info"},e.createElement("p",{className:"modal__box__info__p"},"New game settings"),e.createElement("p",{className:"modal__box__info__p"},"difficulty level: ",l),e.createElement("p",{className:"modal__box__info__p"},"max. check number: ",u)),e.createElement("div",{className:"modal__box__links"},e.createElement(S,{className:"modal__box__links__link reset_link",to:"/game",onClick:s},"Start"),e.createElement(S,{className:"modal__box__links__link reset_link",to:"/settings"},"Settings"),e.createElement(S,{className:"modal__box__links__link reset_link",to:"/"},"Back to main menu"))))},j=()=>{const{difficulty:t,username:a,possibleCheckNumber:o}=r.useContext(I),[l,u]=r.useState(0),[s,c]=r.useState(!0),[_,f]=r.useState([]),[d,k]=r.useState([]),[i,b]=r.useState([]),[M,E]=r.useState(!1),[R,g]=r.useState(!1),[N,v]=r.useState(o),[w,x]=r.useState(0),$=n=>{const m=Math.floor(n/36e5%60),h=Math.floor(n/6e4%60),p=Math.floor(n/1e3%60);return`${m.toString().padStart(2,"0")}:${h.toString().padStart(2,"0")}:${p.toString().padStart(2,"0")}`},C=()=>{const n=sudoku.board_string_to_grid(window.sudoku.generate(t)),m=[].concat(...n);return k(m),f([].concat(...window.sudoku.solve(m))),m},[B,G]=r.useState(()=>C());r.useEffect(()=>{if(!s)return;const n=setInterval(()=>u(m=>m+10),10);return()=>clearInterval(n)},[s]),r.useEffect(()=>{x(n=>n+1),b(_.map((n,m)=>n===d[m]))},[d]),r.useEffect(()=>{if(i.length>0&&!i.includes(!1)){g(!0),c(!1);const n={username:a,difficulty_level:t,check_number:N,time:$(l)},m=JSON.parse(localStorage.getItem("lsResults"))||[];m.push(n),localStorage.setItem("lsResults",JSON.stringify(m))}else g(!1)},[i]);const T=(n,m)=>{k(h=>{const p=[...h];return p[n]=m,p}),E(!1)},y=()=>{u(0),c(!0),E(!1),v(o),x(0),G(C())},D=()=>{s&&v(n=>n-1),c(!1),E(!0)};return e.createElement("section",{className:"main",style:{overflow:"hidden",height:"100dvh"}},e.createElement("div",{className:"header_game"},e.createElement(H,{isGamePage:!0}),e.createElement(P,{running:s,time:l,setRunning:c,setIsChecked:E,newGameActions:y,checkGame:D,possibleCheckNum:N})),e.createElement("div",{className:"sudoku"},e.createElement("div",{className:"sudoku__box"},e.createElement(J,{sudokuData:d,running:s,sudokuChecker:i,isChecked:M,handleChange:T})),R&&e.createElement(Y,{username:a,difficulty:t,time:l,moveNumber:w,possibleCheckNumber:o,newGameActions:y})))};export{j as default};
